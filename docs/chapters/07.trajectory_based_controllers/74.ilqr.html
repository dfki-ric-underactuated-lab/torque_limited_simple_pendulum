<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>iLQR Model Predictive Control &mdash; Torque-limited Simple Pendulum 1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Policy-based Controllers" href="../08.policy_based_controllers.html" />
    <link rel="prev" title="Region of Attraction (RoA) estimation" href="73.tvlqr/732.tvlqr_roa.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Torque-limited Simple Pendulum
            <img src="../../_static/logo.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../00.installation_guide.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.usage_instructions.html">Usage Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.code_testing.html">How to test the code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.model.html">The Physics of a Simple Pendulum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04.hardware.html">Hardware Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05.trajectory_optimization.html">Trajectory Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.reinforcement_learning.html">Reinforcement Learning</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../07.trajectory_based_controllers.html">Trajectory-based Controllers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="71.open_loop.html">Open Loop Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="72.pid.html">Proportional-Integral-Derivative (PID) Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="73.tvlqr.html">Time-varying Linear Quadratic Regulator (TVLQR)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">iLQR Model Predictive Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#theory">Theory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../08.policy_based_controllers.html">Policy-based Controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09.analysis.html">Controller Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10.simulation.html">Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11.contributing.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.analysis.html"><code class="docutils literal notranslate"><span class="pre">Analysis</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.analysis.benchmark.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.analysis.benchmark.html#simple_pendulum.analysis.benchmark.modify_pendulum_parameter"><code class="docutils literal notranslate"><span class="pre">modify_pendulum_parameter()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.analysis.benchmark.html#simple_pendulum.analysis.benchmark.benchmarker"><code class="docutils literal notranslate"><span class="pre">benchmarker</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.analysis.plot_policy.html">Policy Plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.analysis.plot_policy.html#simple_pendulum.analysis.plot_policy.plot_policy"><code class="docutils literal notranslate"><span class="pre">plot_policy()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.html"><code class="docutils literal notranslate"><span class="pre">Controllers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.abstract_controller.html">Abstract Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.abstract_controller.html#simple_pendulum.controllers.abstract_controller.AbstractController"><code class="docutils literal notranslate"><span class="pre">AbstractController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.motor_control_loop.html"><code class="docutils literal notranslate"><span class="pre">ak80_6()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ddpg.html">Deep Deterministic Policy Gradient Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ddpg.ddpg_controller.html">DDPG Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ddpg.ddpg_controller.html#simple_pendulum.controllers.ddpg.ddpg_controller.ddpg_controller"><code class="docutils literal notranslate"><span class="pre">ddpg_controller</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.energy_shaping.html">Energy Shaping Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.energy_shaping.energy_shaping_controller.html">Energy Shaping Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.energy_shaping.energy_shaping_controller.html#simple_pendulum.controllers.energy_shaping.energy_shaping_controller.EnergyShapingController"><code class="docutils literal notranslate"><span class="pre">EnergyShapingController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.energy_shaping.energy_shaping_controller.html#simple_pendulum.controllers.energy_shaping.energy_shaping_controller.EnergyShapingAndLQRController"><code class="docutils literal notranslate"><span class="pre">EnergyShapingAndLQRController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.energy_shaping.unit_test.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.energy_shaping.unit_test.html#simple_pendulum.controllers.energy_shaping.unit_test.Test"><code class="docutils literal notranslate"><span class="pre">Test</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.gamepad.html"><code class="docutils literal notranslate"><span class="pre">Controllers</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.gravity_compensation.html">Gravity Compensation Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.gravity_compensation.gravity_compensation.html">Gravity Compensation Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.gravity_compensation.gravity_compensation.html#simple_pendulum.controllers.gravity_compensation.gravity_compensation.GravityCompController"><code class="docutils literal notranslate"><span class="pre">GravityCompController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ilqr.html">iLQR Model Predictive Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ilqr.iLQR_MPC_controller.html">iLQR MPC Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ilqr.iLQR_MPC_controller.html#simple_pendulum.controllers.ilqr.iLQR_MPC_controller.iLQRMPCController"><code class="docutils literal notranslate"><span class="pre">iLQRMPCController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ilqr.unit_test.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.ilqr.unit_test.html#simple_pendulum.controllers.ilqr.unit_test.Test"><code class="docutils literal notranslate"><span class="pre">Test</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.html">Linear Quadratic Regulator (LQR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.lqr.html">LQR solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.lqr.html#simple_pendulum.controllers.lqr.lqr.lqr"><code class="docutils literal notranslate"><span class="pre">lqr()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.lqr.html#simple_pendulum.controllers.lqr.lqr.dlqr"><code class="docutils literal notranslate"><span class="pre">dlqr()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.lqr_controller.html">LQR Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.lqr_controller.html#simple_pendulum.controllers.lqr.lqr_controller.LQRController"><code class="docutils literal notranslate"><span class="pre">LQRController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.unit_test.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.unit_test.html#simple_pendulum.controllers.lqr.unit_test.Test"><code class="docutils literal notranslate"><span class="pre">Test</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.analytic_roa_estimation.analytic_roa.html"><code class="docutils literal notranslate"><span class="pre">transform()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.analytic_roa_estimation.analytic_roa.html#simple_pendulum.controllers.lqr.analytic_roa_estimation.analytic_roa.analytic_roa"><code class="docutils literal notranslate"><span class="pre">analytic_roa</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.analytic_roa_estimation.najafi_oracle.html"><code class="docutils literal notranslate"><span class="pre">najafi_oracle</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.plot.html"><code class="docutils literal notranslate"><span class="pre">get_ellipse_params()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.plot.html#simple_pendulum.controllers.lqr.roa.plot.get_ellipse_patch"><code class="docutils literal notranslate"><span class="pre">get_ellipse_patch()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.plot.html#simple_pendulum.controllers.lqr.roa.plot.plot_ellipse"><code class="docutils literal notranslate"><span class="pre">plot_ellipse()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.sampling.html"><code class="docutils literal notranslate"><span class="pre">najafi_based_sampling()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.sos.html"><code class="docutils literal notranslate"><span class="pre">SOSequalityConstrained()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.sos.html#simple_pendulum.controllers.lqr.roa.sos.SOSlineSearch"><code class="docutils literal notranslate"><span class="pre">SOSlineSearch()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.utils.html"><code class="docutils literal notranslate"><span class="pre">direct_sphere()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.utils.html#simple_pendulum.controllers.lqr.roa.utils.sample_from_ellipsoid"><code class="docutils literal notranslate"><span class="pre">sample_from_ellipsoid()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.utils.html#simple_pendulum.controllers.lqr.roa.utils.quad_form"><code class="docutils literal notranslate"><span class="pre">quad_form()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.utils.html#simple_pendulum.controllers.lqr.roa.utils.vol_ellipsoid"><code class="docutils literal notranslate"><span class="pre">vol_ellipsoid()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.utils.html#simple_pendulum.controllers.lqr.roa.utils.rhoVerification"><code class="docutils literal notranslate"><span class="pre">rhoVerification()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.lqr.roa.utils.html#simple_pendulum.controllers.lqr.roa.utils.PendulumPlantApprox"><code class="docutils literal notranslate"><span class="pre">PendulumPlantApprox</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.open_loop.html">Open Loop Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.open_loop.open_loop.html">Open Loop Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.open_loop.open_loop.html#simple_pendulum.controllers.open_loop.open_loop.OpenLoopController"><code class="docutils literal notranslate"><span class="pre">OpenLoopController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.open_loop.open_loop.html#simple_pendulum.controllers.open_loop.open_loop.OpenLoopAndLQRController"><code class="docutils literal notranslate"><span class="pre">OpenLoopAndLQRController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.pid.html">Proportional-Integral-Derivative (PID) Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.pid.pid.html">PID Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.pid.pid.html#simple_pendulum.controllers.pid.pid.PIDController"><code class="docutils literal notranslate"><span class="pre">PIDController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.sac.html">Soft Actor Critic (SAC) Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.sac.sac_controller.html">SAC Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.sac.sac_controller.html#simple_pendulum.controllers.sac.sac_controller.SacController"><code class="docutils literal notranslate"><span class="pre">SacController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.html">Time-varying Linear Quadratic Regulator (TVLQR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.tvlqr.html">tvLQR Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.tvlqr.html#simple_pendulum.controllers.tvlqr.tvlqr.TVLQRController"><code class="docutils literal notranslate"><span class="pre">TVLQRController</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html"><code class="docutils literal notranslate"><span class="pre">get_ellipse_params()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.get_ellipse_patch"><code class="docutils literal notranslate"><span class="pre">get_ellipse_patch()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.plot_ellipse"><code class="docutils literal notranslate"><span class="pre">plot_ellipse()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.plotFirstLastEllipses"><code class="docutils literal notranslate"><span class="pre">plotFirstLastEllipses()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.plotRhoEvolution"><code class="docutils literal notranslate"><span class="pre">plotRhoEvolution()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.plotFunnel3d"><code class="docutils literal notranslate"><span class="pre">plotFunnel3d()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.plotFunnel"><code class="docutils literal notranslate"><span class="pre">plotFunnel()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.TVrhoVerification"><code class="docutils literal notranslate"><span class="pre">TVrhoVerification()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.funnel2DComparison"><code class="docutils literal notranslate"><span class="pre">funnel2DComparison()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.plot.html#simple_pendulum.controllers.tvlqr.roa.plot.rhoComparison"><code class="docutils literal notranslate"><span class="pre">rhoComparison()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.probabilistic.html"><code class="docutils literal notranslate"><span class="pre">TVprobRhoComputation()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.sos.html"><code class="docutils literal notranslate"><span class="pre">TVsosRhoComputation()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html"><code class="docutils literal notranslate"><span class="pre">direct_sphere()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html#simple_pendulum.controllers.tvlqr.roa.utils.sample_from_ellipsoid"><code class="docutils literal notranslate"><span class="pre">sample_from_ellipsoid()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html#simple_pendulum.controllers.tvlqr.roa.utils.quad_form"><code class="docutils literal notranslate"><span class="pre">quad_form()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html#simple_pendulum.controllers.tvlqr.roa.utils.projectedEllipseFromCostToGo"><code class="docutils literal notranslate"><span class="pre">projectedEllipseFromCostToGo()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html#simple_pendulum.controllers.tvlqr.roa.utils.getEllipseContour"><code class="docutils literal notranslate"><span class="pre">getEllipseContour()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html#simple_pendulum.controllers.tvlqr.roa.utils.TVrhoSearch"><code class="docutils literal notranslate"><span class="pre">TVrhoSearch()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.controllers.tvlqr.roa.utils.html#simple_pendulum.controllers.tvlqr.roa.utils.TVmultSearch"><code class="docutils literal notranslate"><span class="pre">TVmultSearch()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.html"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html#simple_pendulum.model.parameters.get_params"><code class="docutils literal notranslate"><span class="pre">get_params()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html#simple_pendulum.model.parameters.Environment"><code class="docutils literal notranslate"><span class="pre">Environment</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html#simple_pendulum.model.parameters.Robot"><code class="docutils literal notranslate"><span class="pre">Robot</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html#simple_pendulum.model.parameters.Joints"><code class="docutils literal notranslate"><span class="pre">Joints</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html#simple_pendulum.model.parameters.Links"><code class="docutils literal notranslate"><span class="pre">Links</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.parameters.html#simple_pendulum.model.parameters.Actuators"><code class="docutils literal notranslate"><span class="pre">Actuators</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.pendulum_plant.html">Pendulum Plant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.pendulum_plant.html#simple_pendulum.model.pendulum_plant.PendulumPlant"><code class="docutils literal notranslate"><span class="pre">PendulumPlant</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.unit_test.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.model.unit_test.html#simple_pendulum.model.unit_test.Test"><code class="docutils literal notranslate"><span class="pre">Test</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.html"><code class="docutils literal notranslate"><span class="pre">Reinforcement</span> <span class="pre">Learning</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.html">Deep Determininstic Policy Gradient (DDPG) Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.agent.html">Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.agent.html#simple_pendulum.reinforcement_learning.ddpg.agent.Agent"><code class="docutils literal notranslate"><span class="pre">Agent</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.ddpg.html">DDPG Trainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.ddpg.html#simple_pendulum.reinforcement_learning.ddpg.ddpg.ddpg_trainer"><code class="docutils literal notranslate"><span class="pre">ddpg_trainer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.models.html#simple_pendulum.reinforcement_learning.ddpg.models.get_actor"><code class="docutils literal notranslate"><span class="pre">get_actor()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.models.html#simple_pendulum.reinforcement_learning.ddpg.models.get_critic"><code class="docutils literal notranslate"><span class="pre">get_critic()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.noise.html">Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.noise.html#simple_pendulum.reinforcement_learning.ddpg.noise.OUActionNoise"><code class="docutils literal notranslate"><span class="pre">OUActionNoise</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.replay_buffer.html">Replay Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.ddpg.replay_buffer.html#simple_pendulum.reinforcement_learning.ddpg.replay_buffer.ReplayBuffer"><code class="docutils literal notranslate"><span class="pre">ReplayBuffer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.sac.html">Soft Actor Critic (SAC) Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.sac.sac.html">SAC Trainer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.reinforcement_learning.sac.sac.html#simple_pendulum.reinforcement_learning.sac.sac.sac_trainer"><code class="docutils literal notranslate"><span class="pre">sac_trainer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.html"><code class="docutils literal notranslate"><span class="pre">Simulation</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.gym_environment.html">Gym Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.gym_environment.html#simple_pendulum.simulation.gym_environment.SimplePendulumEnv"><code class="docutils literal notranslate"><span class="pre">SimplePendulumEnv</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.simulation.html">Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.simulation.html#simple_pendulum.simulation.simulation.Simulator"><code class="docutils literal notranslate"><span class="pre">Simulator</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.simulation.html#simple_pendulum.simulation.simulation.get_arrow"><code class="docutils literal notranslate"><span class="pre">get_arrow()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.simulation.simulation.html#simple_pendulum.simulation.simulation.set_arrow_properties"><code class="docutils literal notranslate"><span class="pre">set_arrow_properties()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.html"><code class="docutils literal notranslate"><span class="pre">Trajectory</span> <span class="pre">Optimization</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ddp.html">DDP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.direct_collocation.html">Direct Collocation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.direct_collocation.direct_collocation.html">Direct Collocation Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.direct_collocation.direct_collocation.html#simple_pendulum.trajectory_optimization.direct_collocation.direct_collocation.DirectCollocationCalculator"><code class="docutils literal notranslate"><span class="pre">DirectCollocationCalculator</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.direct_collocation.unit_test.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.direct_collocation.unit_test.html#simple_pendulum.trajectory_optimization.direct_collocation.unit_test.Test"><code class="docutils literal notranslate"><span class="pre">Test</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.html">iLQR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.ilqr.html">iLQR Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.ilqr.html#simple_pendulum.trajectory_optimization.ilqr.ilqr.iLQR_Calculator"><code class="docutils literal notranslate"><span class="pre">iLQR_Calculator</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.ilqr_sympy.html">Symbolic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.ilqr_sympy.html#simple_pendulum.trajectory_optimization.ilqr.ilqr_sympy.iLQR_Calculator"><code class="docutils literal notranslate"><span class="pre">iLQR_Calculator</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html">Pendulum Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.check_type"><code class="docutils literal notranslate"><span class="pre">check_type()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum_continuous_dynamics"><code class="docutils literal notranslate"><span class="pre">pendulum_continuous_dynamics()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum_discrete_dynamics_euler"><code class="docutils literal notranslate"><span class="pre">pendulum_discrete_dynamics_euler()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum_discrete_dynamics_rungekutta"><code class="docutils literal notranslate"><span class="pre">pendulum_discrete_dynamics_rungekutta()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum_swingup_stage_cost"><code class="docutils literal notranslate"><span class="pre">pendulum_swingup_stage_cost()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum_swingup_final_cost"><code class="docutils literal notranslate"><span class="pre">pendulum_swingup_final_cost()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum3_discrete_dynamics_euler"><code class="docutils literal notranslate"><span class="pre">pendulum3_discrete_dynamics_euler()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum3_discrete_dynamics_rungekutta"><code class="docutils literal notranslate"><span class="pre">pendulum3_discrete_dynamics_rungekutta()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum3_swingup_stage_cost"><code class="docutils literal notranslate"><span class="pre">pendulum3_swingup_stage_cost()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.pendulum.html#simple_pendulum.trajectory_optimization.ilqr.pendulum.pendulum3_swingup_final_cost"><code class="docutils literal notranslate"><span class="pre">pendulum3_swingup_final_cost()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.unit_test.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.trajectory_optimization.ilqr.unit_test.html#simple_pendulum.trajectory_optimization.ilqr.unit_test.Test"><code class="docutils literal notranslate"><span class="pre">Test</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.html"><code class="docutils literal notranslate"><span class="pre">Utilities</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.parse.html">Parsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.parse.html#simple_pendulum.utilities.parse.syntax"><code class="docutils literal notranslate"><span class="pre">syntax()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.performance_profiler.html">Performance Profiling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.performance_profiler.html#simple_pendulum.utilities.performance_profiler.motor_send_n_commands"><code class="docutils literal notranslate"><span class="pre">motor_send_n_commands()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.performance_profiler.html#simple_pendulum.utilities.performance_profiler.motor_speed_test"><code class="docutils literal notranslate"><span class="pre">motor_speed_test()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.performance_profiler.html#simple_pendulum.utilities.performance_profiler.profiler"><code class="docutils literal notranslate"><span class="pre">profiler()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.plot.html">Plotting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.plot.html#simple_pendulum.utilities.plot.swingup"><code class="docutils literal notranslate"><span class="pre">swingup()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.plot.html#simple_pendulum.utilities.plot.grav_comp"><code class="docutils literal notranslate"><span class="pre">grav_comp()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.plot.html#simple_pendulum.utilities.plot.sys_id_unified"><code class="docutils literal notranslate"><span class="pre">sys_id_unified()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.plot.html#simple_pendulum.utilities.plot.sys_id_comparison"><code class="docutils literal notranslate"><span class="pre">sys_id_comparison()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.plot.html#simple_pendulum.utilities.plot.sys_id_result"><code class="docutils literal notranslate"><span class="pre">sys_id_result()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html">Data Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.prepare_empty"><code class="docutils literal notranslate"><span class="pre">prepare_empty()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.prepare_trajectory"><code class="docutils literal notranslate"><span class="pre">prepare_trajectory()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.cut"><code class="docutils literal notranslate"><span class="pre">cut()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.save"><code class="docutils literal notranslate"><span class="pre">save()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.saveFunnel"><code class="docutils literal notranslate"><span class="pre">saveFunnel()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.process_data.html#simple_pendulum.utilities.process_data.getEllipseFromCsv"><code class="docutils literal notranslate"><span class="pre">getEllipseFromCsv()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.unit_conversion.html">Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.unit_conversion.html#simple_pendulum.utilities.unit_conversion.rad_to_deg"><code class="docutils literal notranslate"><span class="pre">rad_to_deg()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.unit_conversion.html#simple_pendulum.utilities.unit_conversion.deg_to_rad"><code class="docutils literal notranslate"><span class="pre">deg_to_rad()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.fast_fourier_transform.html">Fast Fourier Transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.fast_fourier_transform.html#simple_pendulum.utilities.filters.fast_fourier_transform.fast_fourier_transform"><code class="docutils literal notranslate"><span class="pre">fast_fourier_transform()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.fast_fourier_transform.html#simple_pendulum.utilities.filters.fast_fourier_transform.scipy_fft"><code class="docutils literal notranslate"><span class="pre">scipy_fft()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.low_pass.html">Low-pass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.low_pass.html#simple_pendulum.utilities.filters.low_pass.online_filter"><code class="docutils literal notranslate"><span class="pre">online_filter()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.running_mean.html">Moving Average</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.running_mean.html#simple_pendulum.utilities.filters.running_mean.data_filter"><code class="docutils literal notranslate"><span class="pre">data_filter()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.running_mean.html#simple_pendulum.utilities.filters.running_mean.data_filter_realtime_1"><code class="docutils literal notranslate"><span class="pre">data_filter_realtime_1()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.running_mean.html#simple_pendulum.utilities.filters.running_mean.data_filter_realtime_2"><code class="docutils literal notranslate"><span class="pre">data_filter_realtime_2()</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.savitzky_golay.html">Savitzky-Golay</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simple_pendulum.utilities.filters.savitzky_golay.html#simple_pendulum.utilities.filters.savitzky_golay.savitzky_golay_filter"><code class="docutils literal notranslate"><span class="pre">savitzky_golay_filter()</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Torque-limited Simple Pendulum</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../07.trajectory_based_controllers.html">Trajectory-based Controllers</a></li>
      <li class="breadcrumb-item active">iLQR Model Predictive Control</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/chapters/07.trajectory_based_controllers/74.ilqr.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ilqr-model-predictive-control">
<h1>iLQR Model Predictive Control<a class="headerlink" href="#ilqr-model-predictive-control" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Type: Model Predictive Control</p>
<p>State/action space contraints: No</p>
<p>Optimal: Yes</p>
<p>Versatility: Swingup and stabilization</p>
</div>
<section id="theory">
<h2>Theory<a class="headerlink" href="#theory" title="Permalink to this heading"></a></h2>
<p>This controller uses the trajectory optimization from the iLQR algorithm (see <a class="reference external" href="https://github.com/dfki-ric-underactuated-lab/torque_limited_simple_pendulum/blob/master/software/python/simple_pendulum/trajectory_optimization/ilqr/README.md">iLQR</a>) in an MPC setting. This means that this controller recomputes an optimal trajectory (including the optimal sequence of control inputs) at every time step. The first control input of this solution is returned as control input for the current state. As the optimization happens every timestep the iLQR algorithm is only executed with one forward and one backward pass. As initial trajectory the solution of the previous timestep is parsed to the iLQR solver.</p>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>pydrake (see <a class="reference external" href="https://github.com/dfki-ric-underactuated-lab/torque_limited_simple_pendulum/blob/master/docs/installation_guide.md">getting_started</a>)</p>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this heading"></a></h2>
<p>The controller can be initialized as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">controller</span> <span class="o">=</span> <span class="n">iLQRMPCController</span><span class="p">(</span><span class="n">mass</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                               <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                               <span class="n">damping</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                               <span class="n">coulomb_friction</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                               <span class="n">gravity</span><span class="o">=</span><span class="mf">9.81</span><span class="p">,</span>
                               <span class="n">x0</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span>
                               <span class="n">dt</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span>
                               <span class="n">N</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                               <span class="n">max_iter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                               <span class="n">break_cost_redu</span><span class="o">=</span><span class="mf">1e-1</span><span class="p">,</span>
                               <span class="n">sCu</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
                               <span class="n">sCp</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
                               <span class="n">sCv</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>
                               <span class="n">sCen</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                               <span class="n">fCp</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
                               <span class="n">fCv</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                               <span class="n">fCen</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
                               <span class="n">dynamics</span><span class="o">=</span><span class="s2">&quot;runge_kutta&quot;</span><span class="p">,</span>
                               <span class="n">n_x</span><span class="o">=</span><span class="n">n2</span><span class="p">)</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mass</span></code>, length, damping, coulomb_friction, gravity are the pendulum parameters (see <a class="reference external" href="https://github.com/dfki-ric-underactuated-lab/torque_limited_simple_pendulum/blob/master/software/python/simple_pendulum/model/README.md">PendulumPlant</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x0</span></code>:   array like, start state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dt</span></code>:   float, time step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">N</span></code>:    int, time steps the controller plans ahead</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_iter</span></code>: int, number of optimization loops</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">break_cost_redu</span></code>: cost at which the optimization stops</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sCu</span></code>: float, stage cost coefficient penalizing the control input every step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sCp</span></code>: float, stage cost coefficient penalizing the position error every step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sCv</span></code>: float, stage cost coefficient penalizing the velocity error every step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sCen</span></code>: float, stage cost coefficient penalizing the energy error every step</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fCp</span></code>: float, final cost coefficient penalizing the position error at the final state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fCv</span></code>: float, final cost coefficient penalizing the velocity error at the final state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fCen</span></code>: float, final cost coefficient penalizing the energy error at the final state</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dynamics</span></code>: string, “euler” for euler integrator, “runge_kutta” for Runge-Kutta integrator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nx</span></code>: int, nx=2, or n_x=3 for pendulum, n_x=2 uses <img class="math" src="_images/math/fd1a9bd32189234f382597bdaae90a72f424ae3c.svg" alt="[\theta, \dot{\theta}]"/> as pendulum state during the optimization, n_x=3 uses <img class="math" src="_images/math/255fe746f77d47ee8b4c60dbe81cb3c83acdbf1e.svg" alt="[\cos(\theta), \sin(\theta), \dot{\theta}]"/> as state</p></li>
</ul>
<p>Before using the controller a goal has to be set via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">controller</span><span class="o">.</span><span class="n">set_goal</span><span class="p">(</span><span class="n">goal</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>which initializes the cost function derivatives inside the controller for the specified goal.</p>
<p>It is possible to either load an initial guess for the trajectory from a csv file by using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">controller</span><span class="o">.</span><span class="n">load_initial_guess</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s2">&quot;../../../../data/trajectories/iLQR/trajectory.csv&quot;</span>
</pre></div>
</div>
<p>for example a trajectory that has been found with the offline trajectory optimization <a class="reference external" href="https://github.com/dfki-ric-underactuated-lab/torque_limited_simple_pendulum/tree/master/software/python/simple_pendulum/trajectory_optimization/ilqr">iLQR</a>.
Alternatively, it is possible to compute a new initial guess with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">controller</span><span class="o">.</span><span class="n">compute_initial_guess</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<p>With an initial guess set the control output can be obtained with the standard controller api:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">controller</span><span class="o">.</span><span class="n">get_control_output</span><span class="p">(</span><span class="n">meas_pos</span><span class="p">,</span> <span class="n">meas_vel</span><span class="p">,</span>
                              <span class="n">meas_tau</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">meas_time</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</pre></div>
</div>
<p>where only the measured position (meas_pos) and measured velocity (meas_vel) are used in the control loop. The function returns</p>
<ul class="simple">
<li><p>None, None, u</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">get_control_output</span></code> returns None for the desired position and desired velocity (the iLQR controller is a pure torque controller). <code class="docutils literal notranslate"><span class="pre">u</span></code> is the first control input of the computed control sequence. as described in the Theory section.</p>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>The controller can be tested in simulation with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">sim_ilqrMPC</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this heading"></a></h2>
<p>For coulomb_fricitons != 0 the optimization gets considerably slower.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="73.tvlqr/732.tvlqr_roa.html" class="btn btn-neutral float-left" title="Region of Attraction (RoA) estimation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../08.policy_based_controllers.html" class="btn btn-neutral float-right" title="Policy-based Controllers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Felix Wiebe, Jonathan Babel, Shivesh Kumar, Shubham Vyas, Daniel Harnack, Melya Boukheddimi, Mihaela Popescu, Frank Kirchner.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>